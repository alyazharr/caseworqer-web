{% extends 'base.html' %}
{% load static %}

{% block meta %}
<title>CaseWorqer</title>
<style>
  .col-25 {
    width: 120%;
    margin-top: 6px;
  }

  .row:after {
    content: "";
    display: table;
    clear: both;
  }

  .col-75 {
    width: 120%;
  }

  @media screen and (max-width: 600px) {
    .rep-position {
      background: rgb(246, 245, 245);
      box-shadow: 1px 2px 10px 0 rgb(202, 201, 201);
      width: 22%;
      margin-left: 30%;
      padding-bottom: 1.7%;
    }

    .tulisan {
      width: 50%;
    }
  }

  .form-place {
    margin-top: 30px;
    background: #eee;
    box-shadow: 3px 4px 15px 0 rgb(233, 233, 233);
    border-left: 7px #101820ff solid;
    width: 45%;
    border-radius: 15px;
    padding-bottom: 1%;
  }

  .form-container {
    padding: 1.7% 5% 2% 4%;
    padding-right: 5%;
  }

  .button-place {
    background-color: #449f5e;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    display: inline-block;
    font-size: 17px;
    transition-duration: 0.3s;
    cursor: pointer;
    margin-top: 30px;
    margin-left: 66.1%;
    text-decoration: none;
  }

  .button-add:hover {
    background-color: #38734a;
    color: white;
    text-decoration: none;
  }

  .break-del {
    display: inline;
    font-size: 18px;
    font-family: 'Sansita One';
    font-family: Arial, Helvetica, sans-serif;
  }

  .display-pict {
    height: 40px;
    width: 40px;
    margin: 15px 10px 0px 0;
    background-color: #fafafa;
    border-radius: 50%;
    float: left;
  }

  .content {
    background-color: #eee;
    font-size: 17px;
    margin-top: 3%;
    margin-bottom: 2.4%;
  }

  .tab-br {
    margin-bottom: 10px;
  }

  .br {
    margin-bottom: 10px;
  }

  .rep-btn {
    background-color: #d6b85a;
    color: white;
    padding: 0.5%;
    font-size: 15px;
    text-decoration: none;
    transition-duration: 0.3s;
    padding: 1% 2% 1% 2%;
    /* atas kanan bawah kiri */
  }

  .rep-btn-hov:hover {
    background-color: #b59432;
    color: white;
    font-size: 15px;
    text-decoration: none;
    transition-duration: 0.3s;
    padding: 1% 2% 1% 2%;
    margin-left: 1.5%;
  }

  .com-position {
    margin-top: 10px;
    background: rgb(224, 224, 224);
    box-shadow: 1px 2px 10px 0 rgb(209, 208, 208);
    border-left: 6px #6a7682 solid;
    width: 40.5%;
    padding-bottom: 3%;
    border-radius: 15px;
    margin-left: 32%;
    margin-top: 1.5%;
    padding: 2px 12px;
  }

  .rep-position {
    background: rgb(246, 245, 245);
    box-shadow: 1px 2px 10px 0 rgb(202, 201, 201);
    width: 22%;
    margin-left: 28%;
    padding-bottom: 1.7%;
  }
</style>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function () {
    $("button").click(function () {
      $("#box").load("../accounts/login #logIn");
    });
  });
</script>

{% endblock meta %}

{% block navbar %}
<ul class="navbar-nav mr-auto">
  <li class="nav-item">
    <a href="../">Home</a>
  </li>
  <li class="nav-item">
    <a href="../pelamarkerja/carilowongan">Cari Lowongan</a>
  </li>
  <li class="nav-item">
    <a href="../lowongankerja/lowonganForm">Buka Lowongan</a>
  </li>
  <li class="nav-item">
    <a href="../tipskarier">Tips Karier</a>
  </li>
  <li class="nav-item">
    <a href="" ; class="active">Forum</a>
  </li>
  <li class="nav-item">
    <a href="../company_review">Company Review</a>
  </li>
</ul>
{% endblock navbar %}

<!-- ini isinya -->
{% block content %}
<h1 style="text-align:center;">CASEWORQER FORUM</h1>

<div style="width: 100%; background: white;" class="content-place ">

  <a href="add" role="button" class="button-place button-add">Add New Post</a>
  <br>
  <!-- this is the post -->
  {% if PostContent %}
  {% for postingan in PostContent %}
  <div class="form-place center ">
    <!-- yang di atas itu background -->
    <div class="form-container">
      <table class="tab-br">
        <thead>
          <img class="display-pict"
            src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/271deea8-e28c-41a3-aaf5-2913f5f48be6/de7834s-6515bd40-8b2c-4dc6-a843-5ac1a95a8b55.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzI3MWRlZWE4LWUyOGMtNDFhMy1hYWY1LTI5MTNmNWY0OGJlNlwvZGU3ODM0cy02NTE1YmQ0MC04YjJjLTRkYzYtYTg0My01YWMxYTk1YThiNTUuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.BopkDn1ptIwbmcKHdAOlYHyAOOACXW0Zfgbs0-6BY-E">
        </thead>
        <tr>
          <p class="br"></p>
          <h4 class="break-del"><b>{{postingan.title}}</b></h4>
          <br>
          <span style="font-size: 15px;opacity:75%;text-decoration: none;">
            by : <b style="color:#1a1aeb;">@{{postingan.userPost}}</b> -
            {{postingan.postTime}}</span>
        </tr>
      </table>
      <p class="content">
        {{postingan.message}}
        <br>
        <!-- {{postingan}} -->
      <p></p>
      </p>
      <button class="rep-btn rep-btn-hov" style="border:none;" onclick="replyFunc('{{postingan.id}}')">Reply</button>
    </div>
  </div>

  <!-- comment section  -->
  <div class="row col-75">
    <div class="rep-position d-none " id="{{postingan.id}}">
      <div style="padding: 2px 16px;" class="">
        <form action="{% url 'add-forum-comment' postingan.id %}" method="POST" onreset="myfunc()">
          {% csrf_token %}

          <div class="tulisan" style="margin-left: 3%;">
            <br>
            <p>Replying <b>{{postingan.title}}</b> by <i style="color:#1a1aeb;">@{{postingan.userPost}}</i></p>
            <p style="font-size:12px;display:inline;">Automatically fill with your username, if you already sign-in</p>
          </div>
          <div class="col-25" style="margin-left: 3%;">
            {{comment.as_table}}<br>
            <p></p>
          </div>
          <div class="d-grid gap-4 d-md-block tulisan" style="padding-left:33%;">
            <input type="submit" class="btn btn-outline-success" value="Post">
            <a href="/forum" class="btn btn-outline-danger" onclick="return batalkan('{{postingan.id}}')">Cancel</a>
            <input class="btn btn-outline-warning" type="reset" value="Reset">
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- comment here, before going to next post forum -->
  {% for com in CommentContent %}
  {% if com.post_id == postingan.id %}
  <div class="com-position center ">
    <div style="padding: 2px 16px;">
      <table class="tab-br">
        <thead>
          <img class="display-pict" style="height: 30px; width: 30px;"
            src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/271deea8-e28c-41a3-aaf5-2913f5f48be6/de7834s-6515bd40-8b2c-4dc6-a843-5ac1a95a8b55.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzI3MWRlZWE4LWUyOGMtNDFhMy1hYWY1LTI5MTNmNWY0OGJlNlwvZGU3ODM0cy02NTE1YmQ0MC04YjJjLTRkYzYtYTg0My01YWMxYTk1YThiNTUuanBnIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.BopkDn1ptIwbmcKHdAOlYHyAOOACXW0Zfgbs0-6BY-E">
        </thead>
        <tr>
          <p class="br"></p>
          <h4 class="break-del" style="font-size:16px;">Re : <b>{{postingan.title}}</b></h4>
          <br>
          <span style="font-size: 14px;opacity:75%;">by : 
            <b style="color:#1a1aeb;">@{{com.userCom}}</b> -
              {{com.commentTime}}</span>
        </tr>
      </table>
      <p class="content" style="background-color:rgb(226, 226, 226);">
        {{com.commentText}}
        <br>
        <!-- {{com}} -->
      </p>
    </div>
  </div>
  {% endif %}
  {% endfor %}

  {% endfor %}
  {% endif %}
  <br>
  <br>
  <br>
</div>

<script>
  function replyFunc(parent_id) {
    const postComment = document.getElementById(parent_id);
    if (postComment.classList.contains('d-none')) {
      postComment.classList.remove('d-none');
    }
    else {
      postComment.classList.add('d-none');
    }
  }
  function myfunc() {
    alert("The change you made will be reset.");
  }
  function batalkan(id) {
    const postComment = document.getElementById(id);
    flag = confirm("Do you really want to cancel ?\nThe change you made will not be saved.")
    if (flag == true) { postComment.classList.add('d-none'); return true; }
    else { postComment.classList.remove('d-none'); return false; }
  }
</script>


<div style="height:10px;background-color:#DA5144"></div>
<div style="height:10px;background-color: white"></div>
{% endblock content %}